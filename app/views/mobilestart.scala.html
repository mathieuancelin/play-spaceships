@(host: String)

@import models._

@main("SpaceShip - Create Ship", host = host) {
  <h3 style="text-align:center;">Créer un vaisseau</h3>
  <div style="text-align:center;padding-bottom:10px;">
    <label for="name">Choisis un nom :</label>
    <input type="text" id="name" />
    <label for="color">Choisis une couleur :</label>
    <input type="color" value="#cccccc" id="color" name="textcolor" />
    <button type="button" id="add">Let's go !</button>
    <br />
    <div style="color:red" id="error"></div>
  </div>

  <script>
      var connection = new WebSocket("ws://localhost:9000/echo");
      document.getElementById('add').addEventListener('click', function(e) {
          var name = document.getElementById('name').value;
          var color = document.getElementById('color').value;
          connection.onopen = function(event) {
              console.log("connect !");
          }
          connection.onmessage = function(event) {
              document.location.href = "/control/"+event.data;
          }
          if(name.length < 12 && name.length > 2 && name[0] != "?" && name != " ") {
              let js = JSON.stringify({"action": "addShip", "name": name, "color": color.slice(1)});
              connection.send(js);
          } else {
              document.getElementById('error').innerHTML="Le nom du vaisseau doit contenir 3 à 12 caractère et aucun caractère spécial.";
          }
      });
  </script>
}
