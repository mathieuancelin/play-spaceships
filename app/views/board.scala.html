@(players: Seq[Player])
@import models._

@moreScripts = {
    <script>
    </script>
}

@main("SpaceShip - Board", moreScripts = moreScripts) {
  <div id="app"></div>
  <div id="timer"></div>
  <div id="data"></div>

  <div id="players">
    @for(player <- players) {
      @player.name
    }
  </div>
  <input type="text" id="name" />
  <button type="button" id="delete">DELETE</button>
  <button type="button" id="clear">CLEAR ALL</button>
  <input type="text" id="nameL" />
  <input type="text" id="point" />
  <button type="button" id="addpoint">ADD POINT</button>
  <script>
      document.getElementById('delete').addEventListener('click', function(e) {
          var name = document.getElementById('name').value;
          fetch('/dropP/'+name, {
              method: 'POST',
              headers: {
                  'Accept': 'application/json',
                  'Content-Type': 'application/json'
              },
              body: '{}'
          });
      });

      document.getElementById('clear').addEventListener('click', function(e) {
          fetch('/clear', {
              method: 'POST',
              headers: {
                  'Accept': 'application/json',
                  'Content-Type': 'application/json'
              },
              body: '{}'
          });
      });

      document.getElementById('addpoint').addEventListener('click', function(e) {
          var name = document.getElementById('nameL').value;
          var point = document.getElementById('point').value;
          fetch('/addPnt/'+name+'/'+point, {
              method: 'POST',
              headers: {
                  'Accept': 'application/json',
                  'Content-Type': 'application/json'
              },
              body: '{}'
          });
      });

      var source = new EventSource('/source');
      source.onmessage = function(e) {
           var data = e.data;
           console.log(data);
           document.getElementById('data').innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
           Spaceships.init(document.getElementById('app'), JSON.parse(data));
      };

  </script>
}
